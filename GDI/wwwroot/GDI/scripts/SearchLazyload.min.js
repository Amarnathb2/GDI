function showProductModal(n,t){var i=window.localStorage.getItem("Bucket")&&JSON.parse(window.localStorage.getItem("Bucket")).length>0?JSON.parse(window.localStorage.getItem("Bucket")):null,h=!1,s=$("#searchModal"),r,c,u,l;s.empty();var f="",e="",o="";if(i)for(r in i)c=i[r].GDIProductImgSM.lastIndexOf("~")+1,n==i[r].GDIProductCode&&(u="",h=!0,i[r].GDIProductSampleAvail?(f='<span class="bar sample-bar">Sample is Available<\/span>',e="Sample is Available"):(f='<span class="bar info-bar">Information is Available<\/span>',e="Information is Available"),o=i[r].GDIProductName+", "+i[r].GDIProductCode+", "+e,l=i[r].GDIProductImgSM.substr(c),u+='<button class="close-button " data-close="" aria-label="Close modal" type="button"><span aria-hidden="true">X<\/span><span class="show-for-medium">close<\/span><\/button>',u+='<div class="product-display searched-product" id="productmodal">',u+='<div class="grid-x grid-padding-x">',u+='<div class="cell small-4 text-center"><div class="relative">'+f+'<img src="'+l+'" alt="'+o+'" /><\/div><\/div>',u+='<div class="cell small-8"><h4>'+i[r].GDIProductDisplayName+"<\/h4><p>"+i[r].GDIProductDescription+"<\/p><p>"+i[r].GDIProductCode+"<\/p><\/div><\/div>",u+="<\/div>",u+='<div class="content-footer"><button class="button blackBtn" data-close type="button" onclick="productRemoveRow('+r+', event)">REMOVE<\/button><\/div>',s.append(u));h||$.ajax({type:"GET",url:"/api/gdiproduct/"+n,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){var r;if(n!=""){$("#searchModal").empty();i=n;var u=n,h=n.GDIProductImgSM.lastIndexOf("~")+1,t="";n.GDIProductSampleAvail?(f='<span class="bar sample-bar">Sample is Available<\/span>',e="Sample is Available"):(f='<span class="bar info-bar">Information is Available<\/span>',e="Information is Available");o=n.GDIProductName+", "+n.GDIProductCode+", "+e;r=n.GDIProductImgSM.substr(h);t+='<button class="close-button " data-close="" aria-label="Close modal" type="button"><span aria-hidden="true">X<\/span><span class="show-for-medium">close<\/span><\/button>';t+='<div class="product-display searched-product" id="productmodal">';t+='<div class="grid-x grid-padding-x">';t+='<div class="cell small-4 text-center"><div class="relative">'+f+'<img src="'+r+'" alt="'+o+'" /><\/div><\/div>';t+='<div class="cell small-8"><h4>'+n.GDIProductDisplayName+"<\/h4><p>"+n.GDIProductDescription+"<\/p><p>"+n.GDIProductCode+"<\/p><\/div><\/div>";t+="<\/div>";t+='<div class="content-footer"><button class="button blackBtn save-product" data-close type="button">SAVE TO CART<\/button><\/div>';s.append(t);$(".save-product").on("click",function(){productAdd(u)})}},error:function(n){console.log(n)}});element=t.currentTarget;console.log(t)}function productRemoveRow(n){var t=JSON.parse(window.localStorage.getItem("Bucket"));t.splice(n,1);localStorage.setItem("Bucket",JSON.stringify(t));updatecartvalue()}function productAdd(n){var t=window.localStorage.getItem("Bucket")&&JSON.parse(window.localStorage.getItem("Bucket")).length>0?JSON.parse(window.localStorage.getItem("Bucket")):[];t.push(n);window.localStorage.setItem("Bucket",JSON.stringify(t));console.log("product added");updatecartvalue()}var searchResultsPageInit=function(){this.pageLoad(this)},element;searchResultsPageInit.prototype=jQuery.extend({},searchResultsPageInit.prototype);searchResultsPageInit.prototype.pageLoad=function(n){n.init(n)};searchResultsPageInit.prototype.init=function(n){n.searchtext=this.getUrlParameter(n,"s");n.filter=this.getUrlParameter(n,"f");n.loading=!1;jQuery(window).scroll(function(){$(window).height()+$(window).scrollTop()+200>$(".lazyLoading").offset().top&&!n.loading&&n.lazyLoadCall(n)})};searchResultsPageInit.prototype.lazyLoadCall=function(n){n.totalcount=$(".search-filter .active span").text().replace(/["'()]/g,"");parseInt($(".resultMainContainer").children().length)<n.totalcount&&(n.loading=!0,$(".resultMainContainer").fadeIn(),$(".lazyLoading").addClass("loading"),n.lastPostFunc(n))};searchResultsPageInit.prototype.lastPostFunc=function(n){n.loading&&(n.skip=jQuery(".resultMainContainer").children().length,$.ajax({type:"POST",url:"/SearchResults/GetResults",data:"{'searchtext':'"+n.searchtext+"','skip':'"+n.skip+"','filter':'"+n.filter+"'}",contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){t!=""&&t.d!=""&&$(".resultMainContainer").append(t.d.replace(/\u00ae/g,"<sup>&reg;<\/sup>"));setTimeout(function(){$(".resultMainContainer").fadeIn("fast");$(".lazyLoading").removeClass("loading");n.loading=!1},300)},error:function(n){console.log(n)}}))};searchResultsPageInit.prototype.getUrlParameter=function(n,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+t+"=([^&#]*)"),i=r.exec(location.search);return i===null?"":decodeURIComponent(i[1].replace(/\+/g," "))};$("#searchModal").on("open.zf.reveal",function(){console.log("open")});$("#searchModal").on("closed.zf.reveal",function(){setTimeout(function(){$('[data-open="searchModal"]').blur();$("html,body").scrollTop($(element).offset().top-500)},10);console.log("closed")});new searchResultsPageInit;